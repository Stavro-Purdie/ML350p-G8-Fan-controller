<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  <title>Dynamic Fan Control</title>
  <style>
    body { font-family: system-ui, -apple-system, Segoe UI, Roboto, sans-serif; margin: 20px; }
    .meters { list-style: none; padding: 0; display: flex; gap: 8px; }
    .meters li { background: #eee; border: 1px solid #ccc; padding: 6px 10px; border-radius: 4px; min-width: 40px; text-align: center; }
    label { display:block; margin-top: 6px; }
  </style>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="icon" href="data:,">
</head>
<body>
  <h1>HP ML350p Gen8 Fan Dashboard</h1>

  <div>
    <p>CPU Temp: <strong>{{ cpu_temp }}</strong> 째C</p>
    <p>GPU Temp: <strong>{{ gpu_temp }}</strong> 째C</p>
  </div>

  <h2>Fan Speeds</h2>
  <ul class="meters">
    {% for s in fan_speeds %}<li>{{ s }}%</li>{% endfor %}
  </ul>

  <h2>Fan Curve</h2>
  <form method="post" action="/update_curve">
    <label>Min Temp: <input type="number" name="minTemp" value="{{ fan_curve.minTemp }}"> 째C</label>
    <label>Max Temp: <input type="number" name="maxTemp" value="{{ fan_curve.maxTemp }}"> 째C</label>
    <label>Min Speed: <input type="number" name="minSpeed" value="{{ fan_curve.minSpeed }}"> %</label>
    <label>Max Speed: <input type="number" name="maxSpeed" value="{{ fan_curve.maxSpeed }}"> %</label>
    <div style="margin-top:8px;"><button type="submit">Update Curve</button></div>
  </form>

  <h2>Service Control</h2>
  <form method="post" action="/control">
    <button name="action" value="start">Start</button>
    <button name="action" value="stop">Stop</button>
  </form>

</body>
</html>
